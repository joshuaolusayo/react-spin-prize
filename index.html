<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>react-spinner-prize-wheel - Live Demo</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script>
        // Debug: Check if React loaded
        window.addEventListener('DOMContentLoaded', () => {
            console.log('React loaded:', typeof React !== 'undefined');
            console.log('ReactDOM loaded:', typeof ReactDOM !== 'undefined');
        });
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #0d254f;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 48px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 20px;
            opacity: 0.9;
        }

        .demo-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }

        .links {
            text-align: center;
            margin: 20px 0;
        }

        .links a {
            color: white;
            text-decoration: none;
            margin: 0 15px;
            font-size: 18px;
            opacity: 0.9;
            transition: opacity 0.2s;
        }

        .links a:hover {
            opacity: 1;
            text-decoration: underline;
        }

        .info-panel {
            background: #f1f5f9;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
        }

        .info-panel code {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            display: block;
            overflow-x: auto;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
        }

        .winner-display {
            margin-top: 30px;
            padding: 20px;
            background: #f0f9ff;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #0ea5e9;
        }

        .winner-display h3 {
            font-size: 24px;
            color: #0c4a6e;
            margin-bottom: 10px;
        }

        .winner-display p {
            font-size: 32px;
            font-weight: bold;
            color: #0369a1;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
            align-items: start;
        }

        .controls {
            background: #f8fafc;
            padding: 25px;
            border-radius: 12px;
            position: sticky;
            top: 20px;
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #334155;
            font-size: 14px;
        }

        .control-group input[type="range"] {
            width: 100%;
            accent-color: #0d254f;
        }

        .control-group input[type="color"] {
            width: 100%;
            height: 40px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
        }

        .control-group input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
        }

        .control-group input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
        }

        .value-display {
            display: inline-block;
            margin-left: 10px;
            color: #64748b;
            font-weight: 500;
        }

        .section-title {
            font-size: 16px;
            font-weight: 700;
            color: #1e293b;
            margin: 20px 0 15px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
        }

        .items-list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .item-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .item-row input[type="text"] {
            flex: 1;
            padding: 8px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 13px;
        }

        .item-row input[type="color"] {
            width: 60px;
            height: 36px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            cursor: pointer;
        }

        .btn {
            background: #0d254f;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: background 0.2s;
        }

        .btn:hover {
            background: #1a3a6e;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
        }

        .btn-danger {
            background: #ef4444;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        @media (max-width: 1024px) {
            .demo-grid {
                grid-template-columns: 1fr;
            }

            .controls {
                position: static;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 32px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŽ¡ react-spinner-prize-wheel</h1>
            <p class="subtitle">Modern, customizable prize wheel spinner for React</p>
            <div class="links">
                <a href="https://github.com/joshuaolusayo/react-spinner-prize-wheel" target="_blank">GitHub</a>
                <a href="https://www.npmjs.com/package/react-spinner-prize-wheel" target="_blank">NPM</a>
                <a href="#installation">Installation</a>
            </div>
        </header>

        <div class="demo-section">
            <h2 style="margin-bottom: 30px; color: #334155; text-align: center;">ðŸŽ® Live Interactive Demo</h2>
            <div id="root"></div>
        </div>

        <div class="demo-section">
            <h2 id="installation" style="margin-bottom: 15px; color: #1e293b;">ðŸ“¦ Installation</h2>
            <div class="info-panel">
                <code>npm install react-spinner-prize-wheel
# or
yarn add react-spinner-prize-wheel
# or
pnpm add react-spinner-prize-wheel</code>
            </div>
        </div>

        <div class="demo-section">
            <h2 style="margin-bottom: 15px; color: #1e293b;">ðŸ’» Usage Example</h2>
            <div class="info-panel">
                <code>import { SpinnerWheel } from 'react-spinner-prize-wheel';

const items = [
  { id: 1, label: 'Prize 1', color: '#FF6B6B' },
  { id: 2, label: 'Prize 2', color: '#4ECDC4' },
  { id: 3, label: 'Prize 3', color: '#45B7D1' },
  { id: 4, label: 'Prize 4', color: '#FFA07A' },
];

function App() {
  const handleSpinComplete = (item) => {
    console.log('Winner:', item);
  };

  return (
    &lt;SpinnerWheel
      items={items}
      onSpinComplete={handleSpinComplete}
      size={500}
      duration={5000}
    />
  );
}</code>
            </div>
        </div>

        <div class="demo-section">
            <h2 style="margin-bottom: 15px; color: #1e293b;">âœ¨ Features</h2>
            <ul style="list-style: none; padding: 0;">
                <li style="padding: 10px 0; border-bottom: 1px solid #e2e8f0;">ðŸŽ¨ Fully customizable colors and styles</li>
                <li style="padding: 10px 0; border-bottom: 1px solid #e2e8f0;">ðŸŽ¯ Precise winner selection</li>
                <li style="padding: 10px 0; border-bottom: 1px solid #e2e8f0;">ðŸŽ­ Smooth animations with easing</li>
                <li style="padding: 10px 0; border-bottom: 1px solid #e2e8f0;">ðŸ“± Responsive and accessible</li>
                <li style="padding: 10px 0; border-bottom: 1px solid #e2e8f0;">ðŸ”§ TypeScript support</li>
                <li style="padding: 10px 0;">ðŸŽª Modern design with customizable center button</li>
            </ul>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        // SpinnerWheel component inline (since we can't import from npm in a static HTML page easily)
        function SpinnerWheel({
            items,
            onSpinComplete,
            spinning: externalSpinning,
            duration = 5000,
            size = 500,
            fontSize = 16,
            borderWidth = 8,
            borderColor = '#333',
            buttonText = 'SPIN',
            buttonColor = '#333',
            buttonTextColor = '#fff',
            buttonBorderColor = '#FFD700',
            buttonBorderWidth = 4,
            disabled = false,
            winningIndex
        }) {
            const [rotation, setRotation] = useState(0);
            const [spinning, setSpinning] = useState(false);
            const animationFrameRef = useRef(null);
            const startTimeRef = useRef(null);

            const spin = useCallback(() => {
                if (spinning || disabled) return;

                const segmentAngle = 360 / items.length;
                const targetIdx = winningIndex !== undefined ? winningIndex : Math.floor(Math.random() * items.length);

                const rotations = 5 + Math.floor(Math.random() * 4);
                const targetRotation = -(targetIdx + 0.5) * segmentAngle;

                const startRotation = rotation;
                const currentNormalized = ((startRotation % 360) + 360) % 360;
                const targetNormalized = ((targetRotation % 360) + 360) % 360;
                const deltaRotation = targetNormalized - currentNormalized;
                const totalRotation = 360 * rotations + deltaRotation;

                setSpinning(true);
                startTimeRef.current = null;

                const animate = (timestamp) => {
                    if (!startTimeRef.current) startTimeRef.current = timestamp;
                    const elapsed = timestamp - startTimeRef.current;
                    const progress = Math.min(elapsed / duration, 1);

                    const easeOutCubic = 1 - Math.pow(1 - progress, 3);
                    const currentRotation = startRotation + totalRotation * easeOutCubic;
                    setRotation(currentRotation);

                    if (progress < 1) {
                        animationFrameRef.current = requestAnimationFrame(animate);
                    } else {
                        setSpinning(false);
                        if (onSpinComplete) {
                            onSpinComplete(items[targetIdx]);
                        }
                    }
                };

                animationFrameRef.current = requestAnimationFrame(animate);
            }, [spinning, items, duration, winningIndex, rotation, onSpinComplete, disabled]);

            useEffect(() => {
                if (externalSpinning && !spinning) {
                    spin();
                }
            }, [externalSpinning, spinning, spin]);

            useEffect(() => {
                return () => {
                    if (animationFrameRef.current) {
                        cancelAnimationFrame(animationFrameRef.current);
                    }
                };
            }, []);

            const segmentAngle = 360 / items.length;
            const radius = size / 2;
            const innerRadius = size * 0.15;

            const createSegmentPath = (index) => {
                const startAngle = (index * segmentAngle - 90) * (Math.PI / 180);
                const endAngle = ((index + 1) * segmentAngle - 90) * (Math.PI / 180);

                const x1 = radius + radius * Math.cos(startAngle);
                const y1 = radius + radius * Math.sin(startAngle);
                const x2 = radius + radius * Math.cos(endAngle);
                const y2 = radius + radius * Math.sin(endAngle);

                const ix1 = radius + innerRadius * Math.cos(startAngle);
                const iy1 = radius + innerRadius * Math.sin(startAngle);
                const ix2 = radius + innerRadius * Math.cos(endAngle);
                const iy2 = radius + innerRadius * Math.sin(endAngle);

                return `M ${ix1},${iy1} L ${x1},${y1} A ${radius},${radius} 0 0,1 ${x2},${y2} L ${ix2},${iy2} A ${innerRadius},${innerRadius} 0 0,0 ${ix1},${iy1} Z`;
            };

            const getTextPosition = (index) => {
                const angle = (index + 0.5) * segmentAngle - 90;
                const textRadius = (radius + innerRadius) / 1.5;
                const x = radius + textRadius * Math.cos(angle * Math.PI / 180);
                const y = radius + textRadius * Math.sin(angle * Math.PI / 180);
                return { x, y, angle: angle + 90 };
            };

            const calculatedFontSize = items.length > 12 ? Math.max(10, fontSize - (items.length - 12)) : fontSize;

            return (
                <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '20px' }}>
                    <div style={{ position: 'relative', width: size, height: size }}>
                        <svg width={size} height={size} style={{ transform: `rotate(${rotation}deg)`, transition: 'none' }}>
                            {items.map((item, index) => {
                                const textPos = getTextPosition(index);
                                const color = item.color || `hsl(${(index * 360) / items.length}, 70%, 60%)`;
                                const textColor = item.textColor || '#fff';

                                return (
                                    <g key={item.id}>
                                        <path d={createSegmentPath(index)} fill={color} stroke="#fff" strokeWidth="3" strokeLinejoin="round" />
                                        <text
                                            x={textPos.x}
                                            y={textPos.y}
                                            fill={textColor}
                                            fontSize={calculatedFontSize}
                                            fontWeight="600"
                                            textAnchor="middle"
                                            dominantBaseline="middle"
                                            transform={`rotate(${textPos.angle}, ${textPos.x}, ${textPos.y})`}
                                        >
                                            {item.label.length > 15 ? item.label.substring(0, 12) + '...' : item.label}
                                        </text>
                                    </g>
                                );
                            })}
                            <circle cx={radius} cy={radius} r={radius - borderWidth / 2} fill="none" stroke={borderColor} strokeWidth={borderWidth} />
                        </svg>

                        <div style={{
                            position: 'absolute',
                            top: '50%',
                            left: '50%',
                            transform: 'translate(-50%, -50%)',
                            width: innerRadius * 2,
                            height: innerRadius * 2,
                            borderRadius: '50%',
                            backgroundColor: buttonColor,
                            border: `${buttonBorderWidth}px solid ${buttonBorderColor}`,
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center',
                            cursor: disabled || spinning ? 'not-allowed' : 'pointer',
                            opacity: disabled ? 0.6 : 1,
                            boxShadow: '0 4px 12px rgba(0,0,0,0.3)',
                            transition: 'transform 0.1s',
                        }}
                        onClick={spin}
                        onMouseDown={(e) => !disabled && !spinning && (e.currentTarget.style.transform = 'translate(-50%, -50%) scale(0.95)')}
                        onMouseUp={(e) => e.currentTarget.style.transform = 'translate(-50%, -50%) scale(1)'}
                        onMouseLeave={(e) => e.currentTarget.style.transform = 'translate(-50%, -50%) scale(1)'}
                        >
                            <span style={{
                                color: buttonTextColor,
                                fontSize: innerRadius * 0.4,
                                fontWeight: 'bold',
                                userSelect: 'none',
                            }}>
                                {buttonText}
                            </span>
                        </div>

                        <div style={{
                            position: 'absolute',
                            top: -10,
                            left: '50%',
                            transform: 'translateX(-50%)',
                            width: 0,
                            height: 0,
                            borderLeft: '15px solid transparent',
                            borderRight: '15px solid transparent',
                            borderTop: '25px solid #FFD700',
                        }} />
                    </div>
                </div>
            );
        }

        // Demo App
        function Demo() {
            const [winner, setWinner] = useState(null);

            // Wheel items state
            const [items, setItems] = useState([
                { id: 1, label: 'ðŸŽ Prize 1', color: '#FF6B6B' },
                { id: 2, label: 'ðŸ† Prize 2', color: '#4ECDC4' },
                { id: 3, label: 'ðŸ’Ž Prize 3', color: '#45B7D1' },
                { id: 4, label: 'â­ Prize 4', color: '#FFA07A' },
                { id: 5, label: 'ðŸŽ¯ Prize 5', color: '#98D8C8' },
                { id: 6, label: 'ðŸ”¥ Prize 6', color: '#F7DC6F' },
                { id: 7, label: 'ðŸ’° Prize 7', color: '#BB8FCE' },
                { id: 8, label: 'ðŸŽª Prize 8', color: '#85C1E2' },
            ]);

            // Customization state
            const [size, setSize] = useState(500);
            const [duration, setDuration] = useState(5000);
            const [fontSize, setFontSize] = useState(16);
            const [borderWidth, setBorderWidth] = useState(8);
            const [borderColor, setBorderColor] = useState('#f59e0b');
            const [buttonText, setButtonText] = useState('SPIN');
            const [buttonColor, setButtonColor] = useState('#f59e0b');
            const [buttonTextColor, setButtonTextColor] = useState('#ffffff');
            const [buttonBorderColor, setButtonBorderColor] = useState('#FFD700');
            const [buttonBorderWidth, setButtonBorderWidth] = useState(6);

            const handleSpinComplete = (item) => {
                setWinner(item);
            };

            const updateItem = (id, field, value) => {
                setItems(items.map(item =>
                    item.id === id ? { ...item, [field]: value } : item
                ));
            };

            const addItem = () => {
                const newId = Math.max(...items.map(i => i.id), 0) + 1;
                const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E2'];
                setItems([...items, {
                    id: newId,
                    label: `Prize ${newId}`,
                    color: colors[newId % colors.length]
                }]);
            };

            const removeItem = (id) => {
                if (items.length > 2) {
                    setItems(items.filter(item => item.id !== id));
                }
            };

            return (
                <div className="demo-grid">
                    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
                        <SpinnerWheel
                            items={items}
                            onSpinComplete={handleSpinComplete}
                            size={size}
                            duration={duration}
                            fontSize={fontSize}
                            borderColor={borderColor}
                            borderWidth={borderWidth}
                            buttonText={buttonText}
                            buttonColor={buttonColor}
                            buttonTextColor={buttonTextColor}
                            buttonBorderColor={buttonBorderColor}
                            buttonBorderWidth={buttonBorderWidth}
                        />

                        {winner && (
                            <div className="winner-display">
                                <h3>ðŸŽ‰ Winner!</h3>
                                <p>{winner.label}</p>
                            </div>
                        )}
                    </div>

                    <div className="controls">
                        <h3 style={{ margin: 0, marginBottom: 20, color: '#1e293b' }}>Customize Your Wheel</h3>

                        <div className="section-title">Wheel Settings</div>

                        <div className="control-group">
                            <label>
                                Size: <span className="value-display">{size}px</span>
                            </label>
                            <input
                                type="range"
                                min="300"
                                max="700"
                                value={size}
                                onChange={(e) => setSize(Number(e.target.value))}
                            />
                        </div>

                        <div className="control-group">
                            <label>
                                Spin Duration: <span className="value-display">{duration}ms</span>
                            </label>
                            <input
                                type="range"
                                min="2000"
                                max="10000"
                                step="500"
                                value={duration}
                                onChange={(e) => setDuration(Number(e.target.value))}
                            />
                        </div>

                        <div className="control-group">
                            <label>
                                Font Size: <span className="value-display">{fontSize}px</span>
                            </label>
                            <input
                                type="range"
                                min="10"
                                max="24"
                                value={fontSize}
                                onChange={(e) => setFontSize(Number(e.target.value))}
                            />
                        </div>

                        <div className="control-group">
                            <label>
                                Border Width: <span className="value-display">{borderWidth}px</span>
                            </label>
                            <input
                                type="range"
                                min="0"
                                max="20"
                                value={borderWidth}
                                onChange={(e) => setBorderWidth(Number(e.target.value))}
                            />
                        </div>

                        <div className="control-group">
                            <label>Border Color</label>
                            <input
                                type="color"
                                value={borderColor}
                                onChange={(e) => setBorderColor(e.target.value)}
                            />
                        </div>

                        <div className="section-title">Button Settings</div>

                        <div className="control-group">
                            <label>Button Text</label>
                            <input
                                type="text"
                                value={buttonText}
                                onChange={(e) => setButtonText(e.target.value)}
                            />
                        </div>

                        <div className="control-group">
                            <label>Button Color</label>
                            <input
                                type="color"
                                value={buttonColor}
                                onChange={(e) => setButtonColor(e.target.value)}
                            />
                        </div>

                        <div className="control-group">
                            <label>Button Text Color</label>
                            <input
                                type="color"
                                value={buttonTextColor}
                                onChange={(e) => setButtonTextColor(e.target.value)}
                            />
                        </div>

                        <div className="control-group">
                            <label>Button Border Color</label>
                            <input
                                type="color"
                                value={buttonBorderColor}
                                onChange={(e) => setButtonBorderColor(e.target.value)}
                            />
                        </div>

                        <div className="control-group">
                            <label>
                                Button Border Width: <span className="value-display">{buttonBorderWidth}px</span>
                            </label>
                            <input
                                type="range"
                                min="0"
                                max="12"
                                value={buttonBorderWidth}
                                onChange={(e) => setButtonBorderWidth(Number(e.target.value))}
                            />
                        </div>

                        <div className="section-title">
                            Prize Items
                            <button className="btn btn-small" style={{ float: 'right' }} onClick={addItem}>
                                + Add Item
                            </button>
                        </div>

                        <div className="items-list">
                            {items.map((item, index) => (
                                <div key={item.id} className="item-row">
                                    <input
                                        type="text"
                                        value={item.label}
                                        onChange={(e) => updateItem(item.id, 'label', e.target.value)}
                                        placeholder="Prize label"
                                    />
                                    <input
                                        type="color"
                                        value={item.color}
                                        onChange={(e) => updateItem(item.id, 'color', e.target.value)}
                                    />
                                    {items.length > 2 && (
                                        <button
                                            className="btn btn-small btn-danger"
                                            onClick={() => removeItem(item.id)}
                                        >
                                            Ã—
                                        </button>
                                    )}
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        // Use React 18 createRoot API if available, fallback to render
        const rootElement = document.getElementById('root');
        if (ReactDOM.createRoot) {
            const root = ReactDOM.createRoot(rootElement);
            root.render(<Demo />);
        } else {
            ReactDOM.render(<Demo />, rootElement);
        }
    </script>
</body>
</html>
