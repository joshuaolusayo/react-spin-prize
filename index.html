<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>react-spinner-prize-wheel - Live Demo</title>
    <script crossorigin src="https://unpkg.com/react@19/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@19/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 48px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 20px;
            opacity: 0.9;
        }

        .demo-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }

        .links {
            text-align: center;
            margin: 20px 0;
        }

        .links a {
            color: white;
            text-decoration: none;
            margin: 0 15px;
            font-size: 18px;
            opacity: 0.9;
            transition: opacity 0.2s;
        }

        .links a:hover {
            opacity: 1;
            text-decoration: underline;
        }

        .info-panel {
            background: #f1f5f9;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
        }

        .info-panel code {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            display: block;
            overflow-x: auto;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
        }

        .winner-display {
            margin-top: 30px;
            padding: 20px;
            background: #f0f9ff;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #0ea5e9;
        }

        .winner-display h3 {
            font-size: 24px;
            color: #0c4a6e;
            margin-bottom: 10px;
        }

        .winner-display p {
            font-size: 32px;
            font-weight: bold;
            color: #0369a1;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 32px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŽ¡ react-spinner-prize-wheel</h1>
            <p class="subtitle">Modern, customizable prize wheel spinner for React</p>
            <div class="links">
                <a href="https://github.com/joshuaolusayo/react-prize-wheel" target="_blank">GitHub</a>
                <a href="https://www.npmjs.com/package/react-spinner-prize-wheel" target="_blank">NPM</a>
                <a href="#installation">Installation</a>
            </div>
        </header>

        <div class="demo-section">
            <h2 style="margin-bottom: 20px; color: #334155; text-align: center;">ðŸŽ® Live Interactive Demo</h2>
            <div id="root"></div>
        </div>

        <div class="demo-section">
            <h2 id="installation" style="margin-bottom: 15px; color: #1e293b;">ðŸ“¦ Installation</h2>
            <div class="info-panel">
                <code>npm install react-spinner-prize-wheel
# or
yarn add react-spinner-prize-wheel
# or
pnpm add react-spinner-prize-wheel</code>
            </div>
        </div>

        <div class="demo-section">
            <h2 style="margin-bottom: 15px; color: #1e293b;">ðŸ’» Usage Example</h2>
            <div class="info-panel">
                <code>import { SpinnerWheel } from 'react-spinner-prize-wheel';

const items = [
  { id: 1, label: 'Prize 1', color: '#FF6B6B' },
  { id: 2, label: 'Prize 2', color: '#4ECDC4' },
  { id: 3, label: 'Prize 3', color: '#45B7D1' },
  { id: 4, label: 'Prize 4', color: '#FFA07A' },
];

function App() {
  const handleSpinComplete = (item) => {
    console.log('Winner:', item);
  };

  return (
    &lt;SpinnerWheel
      items={items}
      onSpinComplete={handleSpinComplete}
      size={500}
      duration={5000}
    />
  );
}</code>
            </div>
        </div>

        <div class="demo-section">
            <h2 style="margin-bottom: 15px; color: #1e293b;">âœ¨ Features</h2>
            <ul style="list-style: none; padding: 0;">
                <li style="padding: 10px 0; border-bottom: 1px solid #e2e8f0;">ðŸŽ¨ Fully customizable colors and styles</li>
                <li style="padding: 10px 0; border-bottom: 1px solid #e2e8f0;">ðŸŽ¯ Precise winner selection</li>
                <li style="padding: 10px 0; border-bottom: 1px solid #e2e8f0;">ðŸŽ­ Smooth animations with easing</li>
                <li style="padding: 10px 0; border-bottom: 1px solid #e2e8f0;">ðŸ“± Responsive and accessible</li>
                <li style="padding: 10px 0; border-bottom: 1px solid #e2e8f0;">ðŸ”§ TypeScript support</li>
                <li style="padding: 10px 0;">ðŸŽª Modern design with customizable center button</li>
            </ul>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        // SpinnerWheel component inline (since we can't import from npm in a static HTML page easily)
        function SpinnerWheel({
            items,
            onSpinComplete,
            spinning: externalSpinning,
            duration = 5000,
            size = 500,
            fontSize = 16,
            borderWidth = 8,
            borderColor = '#333',
            buttonText = 'SPIN',
            buttonColor = '#333',
            buttonTextColor = '#fff',
            buttonBorderColor = '#FFD700',
            buttonBorderWidth = 4,
            disabled = false,
            winningIndex
        }) {
            const [rotation, setRotation] = useState(0);
            const [spinning, setSpinning] = useState(false);
            const animationFrameRef = useRef(null);
            const startTimeRef = useRef(null);

            const spin = useCallback(() => {
                if (spinning || disabled) return;

                const segmentAngle = 360 / items.length;
                const targetIdx = winningIndex !== undefined ? winningIndex : Math.floor(Math.random() * items.length);

                const rotations = 5 + Math.floor(Math.random() * 4);
                const targetRotation = -(targetIdx + 0.5) * segmentAngle;

                const startRotation = rotation;
                const currentNormalized = ((startRotation % 360) + 360) % 360;
                const targetNormalized = ((targetRotation % 360) + 360) % 360;
                const deltaRotation = targetNormalized - currentNormalized;
                const totalRotation = 360 * rotations + deltaRotation;

                setSpinning(true);
                startTimeRef.current = null;

                const animate = (timestamp) => {
                    if (!startTimeRef.current) startTimeRef.current = timestamp;
                    const elapsed = timestamp - startTimeRef.current;
                    const progress = Math.min(elapsed / duration, 1);

                    const easeOutCubic = 1 - Math.pow(1 - progress, 3);
                    const currentRotation = startRotation + totalRotation * easeOutCubic;
                    setRotation(currentRotation);

                    if (progress < 1) {
                        animationFrameRef.current = requestAnimationFrame(animate);
                    } else {
                        setSpinning(false);
                        if (onSpinComplete) {
                            onSpinComplete(items[targetIdx]);
                        }
                    }
                };

                animationFrameRef.current = requestAnimationFrame(animate);
            }, [spinning, items, duration, winningIndex, rotation, onSpinComplete, disabled]);

            useEffect(() => {
                if (externalSpinning && !spinning) {
                    spin();
                }
            }, [externalSpinning, spinning, spin]);

            useEffect(() => {
                return () => {
                    if (animationFrameRef.current) {
                        cancelAnimationFrame(animationFrameRef.current);
                    }
                };
            }, []);

            const segmentAngle = 360 / items.length;
            const radius = size / 2;
            const innerRadius = size * 0.15;

            const createSegmentPath = (index) => {
                const startAngle = (index * segmentAngle - 90) * (Math.PI / 180);
                const endAngle = ((index + 1) * segmentAngle - 90) * (Math.PI / 180);

                const x1 = radius + radius * Math.cos(startAngle);
                const y1 = radius + radius * Math.sin(startAngle);
                const x2 = radius + radius * Math.cos(endAngle);
                const y2 = radius + radius * Math.sin(endAngle);

                const ix1 = radius + innerRadius * Math.cos(startAngle);
                const iy1 = radius + innerRadius * Math.sin(startAngle);
                const ix2 = radius + innerRadius * Math.cos(endAngle);
                const iy2 = radius + innerRadius * Math.sin(endAngle);

                return `M ${ix1},${iy1} L ${x1},${y1} A ${radius},${radius} 0 0,1 ${x2},${y2} L ${ix2},${iy2} A ${innerRadius},${innerRadius} 0 0,0 ${ix1},${iy1} Z`;
            };

            const getTextPosition = (index) => {
                const angle = (index + 0.5) * segmentAngle - 90;
                const textRadius = (radius + innerRadius) / 1.5;
                const x = radius + textRadius * Math.cos(angle * Math.PI / 180);
                const y = radius + textRadius * Math.sin(angle * Math.PI / 180);
                return { x, y, angle: angle + 90 };
            };

            const calculatedFontSize = items.length > 12 ? Math.max(10, fontSize - (items.length - 12)) : fontSize;

            return (
                <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '20px' }}>
                    <div style={{ position: 'relative', width: size, height: size }}>
                        <svg width={size} height={size} style={{ transform: `rotate(${rotation}deg)`, transition: 'none' }}>
                            <circle cx={radius} cy={radius} r={radius} fill="none" stroke={borderColor} strokeWidth={borderWidth} />
                            {items.map((item, index) => {
                                const textPos = getTextPosition(index);
                                const color = item.color || `hsl(${(index * 360) / items.length}, 70%, 60%)`;
                                const textColor = item.textColor || '#fff';

                                return (
                                    <g key={item.id}>
                                        <path d={createSegmentPath(index)} fill={color} stroke="#fff" strokeWidth="2" />
                                        <text
                                            x={textPos.x}
                                            y={textPos.y}
                                            fill={textColor}
                                            fontSize={calculatedFontSize}
                                            fontWeight="600"
                                            textAnchor="middle"
                                            dominantBaseline="middle"
                                            transform={`rotate(${textPos.angle}, ${textPos.x}, ${textPos.y})`}
                                        >
                                            {item.label.length > 15 ? item.label.substring(0, 12) + '...' : item.label}
                                        </text>
                                    </g>
                                );
                            })}
                        </svg>

                        <div style={{
                            position: 'absolute',
                            top: '50%',
                            left: '50%',
                            transform: 'translate(-50%, -50%)',
                            width: innerRadius * 2,
                            height: innerRadius * 2,
                            borderRadius: '50%',
                            backgroundColor: buttonColor,
                            border: `${buttonBorderWidth}px solid ${buttonBorderColor}`,
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center',
                            cursor: disabled || spinning ? 'not-allowed' : 'pointer',
                            opacity: disabled ? 0.6 : 1,
                            boxShadow: '0 4px 12px rgba(0,0,0,0.3)',
                            transition: 'transform 0.1s',
                        }}
                        onClick={spin}
                        onMouseDown={(e) => !disabled && !spinning && (e.currentTarget.style.transform = 'translate(-50%, -50%) scale(0.95)')}
                        onMouseUp={(e) => e.currentTarget.style.transform = 'translate(-50%, -50%) scale(1)'}
                        onMouseLeave={(e) => e.currentTarget.style.transform = 'translate(-50%, -50%) scale(1)'}
                        >
                            <span style={{
                                color: buttonTextColor,
                                fontSize: innerRadius * 0.4,
                                fontWeight: 'bold',
                                userSelect: 'none',
                            }}>
                                {buttonText}
                            </span>
                        </div>

                        <div style={{
                            position: 'absolute',
                            top: -10,
                            left: '50%',
                            transform: 'translateX(-50%)',
                            width: 0,
                            height: 0,
                            borderLeft: '15px solid transparent',
                            borderRight: '15px solid transparent',
                            borderTop: '25px solid #FFD700',
                        }} />
                    </div>
                </div>
            );
        }

        // Demo App
        function Demo() {
            const [winner, setWinner] = useState(null);

            const items = [
                { id: 1, label: 'ðŸŽ Prize 1', color: '#FF6B6B' },
                { id: 2, label: 'ðŸ† Prize 2', color: '#4ECDC4' },
                { id: 3, label: 'ðŸ’Ž Prize 3', color: '#45B7D1' },
                { id: 4, label: 'â­ Prize 4', color: '#FFA07A' },
                { id: 5, label: 'ðŸŽ¯ Prize 5', color: '#98D8C8' },
                { id: 6, label: 'ðŸ”¥ Prize 6', color: '#F7DC6F' },
                { id: 7, label: 'ðŸ’° Prize 7', color: '#BB8FCE' },
                { id: 8, label: 'ðŸŽª Prize 8', color: '#85C1E2' },
            ];

            const handleSpinComplete = (item) => {
                setWinner(item);
            };

            return (
                <div style={{ textAlign: 'center' }}>
                    <SpinnerWheel
                        items={items}
                        onSpinComplete={handleSpinComplete}
                        size={500}
                        duration={5000}
                        borderColor="#f59e0b"
                        borderWidth={8}
                        buttonColor="#f59e0b"
                        buttonTextColor="#fff"
                        buttonBorderColor="#FFD700"
                        buttonBorderWidth={6}
                    />

                    {winner && (
                        <div className="winner-display">
                            <h3>ðŸŽ‰ Winner!</h3>
                            <p>{winner.label}</p>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<Demo />, document.getElementById('root'));
    </script>
</body>
</html>
